{"openapi":"3.1.0","info":{"title":"AI Language Tutor API","description":"Intelligent, personalized multi-language learning platform","version":"0.1.0"},"paths":{"/api/v1/health/":{"get":{"tags":["health"],"summary":"Health Check","description":"Basic health check endpoint.\n\nReturns:\n    HealthResponse: Basic health status.","operationId":"health_check_api_v1_health__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HealthResponse"}}}}}}},"/api/v1/health/detailed":{"get":{"tags":["health"],"summary":"Detailed Health Check","description":"Detailed health check with dependency verification.\n\nArgs:\n    neo4j_session: Neo4j database session.\n    postgresql_session: PostgreSQL database session.\n\nReturns:\n    HealthResponse: Detailed health status including dependencies.\n\nRaises:\n    HTTPException: If any dependency is unhealthy.","operationId":"detailed_health_check_api_v1_health_detailed_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HealthResponse"}}}}}}},"/api/v1/auth/register":{"post":{"tags":["auth"],"summary":"Register User","description":"Register a new user account.\n\nCreates a new user with the provided information and returns the user data.\nPasswords are securely hashed using bcrypt.","operationId":"register_user_api_v1_auth_register_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserCreate"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/auth/token":{"post":{"tags":["auth"],"summary":"Login For Access Token","description":"Login endpoint that returns a JWT access token.\n\nAccepts username/email and password, returns JWT token on successful authentication.\nToken expires after 7 days by default.","operationId":"login_for_access_token_api_v1_auth_token_post","requestBody":{"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Body_login_for_access_token_api_v1_auth_token_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Token"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/auth/login":{"post":{"tags":["auth"],"summary":"Login User","description":"Alternative login endpoint accepting JSON payload.\n\nSame functionality as /token but accepts JSON instead of form data.","operationId":"login_user_api_v1_auth_login_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserLogin"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Token"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/auth/me":{"get":{"tags":["auth"],"summary":"Read Users Me","description":"Get current user information.\n\nReturns the authenticated user's profile information.","operationId":"read_users_me_api_v1_auth_me_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/v1/auth/profile":{"get":{"tags":["auth"],"summary":"Get User Profile","description":"Get extended user profile with learning statistics.\n\nReturns user information along with learning progress data.","operationId":"get_user_profile_api_v1_auth_profile_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserProfile"}}}}},"security":[{"OAuth2PasswordBearer":[]}]},"put":{"tags":["auth"],"summary":"Update User Profile","description":"Update user profile information.\n\nUpdates the authenticated user's profile with the provided data.\nOnly non-null fields in the request will be updated.","operationId":"update_user_profile_api_v1_auth_profile_put","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserUpdate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/v1/auth/change-password":{"post":{"tags":["auth"],"summary":"Change Password","description":"Change user password.\n\nRequires the current password for verification before setting the new password.","operationId":"change_password_api_v1_auth_change_password_post","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"current_password","in":"query","required":true,"schema":{"type":"string","title":"Current Password"}},{"name":"new_password","in":"query","required":true,"schema":{"type":"string","title":"New Password"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/auth/deactivate":{"post":{"tags":["auth"],"summary":"Deactivate Account","description":"Deactivate user account.\n\nMarks the user account as inactive. The user will no longer be able to log in.","operationId":"deactivate_account_api_v1_auth_deactivate_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/v1/auth/verify-token":{"get":{"tags":["auth"],"summary":"Verify Token","description":"Verify JWT token validity.\n\nReturns user information if the token is valid and the user is active.","operationId":"verify_token_api_v1_auth_verify_token_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/v1/auth/health":{"get":{"tags":["auth"],"summary":"Auth Health Check","description":"Health check for authentication service.","operationId":"auth_health_check_api_v1_auth_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/grammar/patterns":{"get":{"tags":["grammar","grammar"],"summary":"Get Grammar Patterns","description":"Get grammar patterns with optional filtering and pagination.\n\n- **level**: Filter by textbook level (e.g., 'å¥é(ããã)', 'åç´1(ããã)')\n- **classification**: Filter by grammar function (e.g., 'èª¬æ', 'æéçåå¾')\n- **jfs_category**: Filter by JFS topic (e.g., 'èªåã¨å®¶æ', 'é£çæ´»')\n- **search**: Search in pattern text or example sentences\n- **limit**: Maximum number of results (1-100)\n- **offset**: Number of results to skip for pagination","operationId":"get_grammar_patterns_api_v1_grammar_patterns_get","parameters":[{"name":"level","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Textbook level filter","title":"Level"},"description":"Textbook level filter"},{"name":"classification","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Grammar classification filter","title":"Classification"},"description":"Grammar classification filter"},{"name":"jfs_category","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"JFS category filter","title":"Jfs Category"},"description":"JFS category filter"},{"name":"search","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Search in pattern or example","title":"Search"},"description":"Search in pattern or example"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"Number of results to return","default":20,"title":"Limit"},"description":"Number of results to return"},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"description":"Number of results to skip","default":0,"title":"Offset"},"description":"Number of results to skip"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/GrammarPatternResponse"},"title":"Response Get Grammar Patterns Api V1 Grammar Patterns Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/grammar/patterns/count":{"get":{"tags":["grammar","grammar"],"summary":"Count Grammar Patterns","description":"Return total count for patterns matching filters.","operationId":"count_grammar_patterns_api_v1_grammar_patterns_count_get","parameters":[{"name":"level","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Textbook level filter","title":"Level"},"description":"Textbook level filter"},{"name":"classification","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Grammar classification filter","title":"Classification"},"description":"Grammar classification filter"},{"name":"jfs_category","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"JFS category filter","title":"Jfs Category"},"description":"JFS category filter"},{"name":"search","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Search in pattern or example","title":"Search"},"description":"Search in pattern or example"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":{"type":"integer"},"title":"Response Count Grammar Patterns Api V1 Grammar Patterns Count Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/grammar/patterns/{pattern_id}":{"get":{"tags":["grammar","grammar"],"summary":"Get Grammar Pattern","description":"Get a specific grammar pattern by ID","operationId":"get_grammar_pattern_api_v1_grammar_patterns__pattern_id__get","parameters":[{"name":"pattern_id","in":"path","required":true,"schema":{"type":"string","title":"Pattern Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GrammarPatternResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/grammar/patterns/{pattern_id}/similar":{"get":{"tags":["grammar","grammar"],"summary":"Get Similar Patterns","description":"Get patterns similar to the specified pattern","operationId":"get_similar_patterns_api_v1_grammar_patterns__pattern_id__similar_get","parameters":[{"name":"pattern_id","in":"path","required":true,"schema":{"type":"string","title":"Pattern Id"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":20,"minimum":1,"description":"Number of similar patterns to return","default":5,"title":"Limit"},"description":"Number of similar patterns to return"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/SimilarPatternResponse"},"title":"Response Get Similar Patterns Api V1 Grammar Patterns  Pattern Id  Similar Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/grammar/patterns/{pattern_id}/prerequisites":{"get":{"tags":["grammar","grammar"],"summary":"Get Prerequisites","description":"Get prerequisite patterns for the specified pattern","operationId":"get_prerequisites_api_v1_grammar_patterns__pattern_id__prerequisites_get","parameters":[{"name":"pattern_id","in":"path","required":true,"schema":{"type":"string","title":"Pattern Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/GrammarPatternResponse"},"title":"Response Get Prerequisites Api V1 Grammar Patterns  Pattern Id  Prerequisites Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/grammar/learning-path":{"get":{"tags":["grammar","grammar"],"summary":"Get Learning Path","description":"Generate a learning path from a pattern to a target level","operationId":"get_learning_path_api_v1_grammar_learning_path_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"from_pattern","in":"query","required":true,"schema":{"type":"string","description":"Starting pattern ID","title":"From Pattern"},"description":"Starting pattern ID"},{"name":"to_level","in":"query","required":true,"schema":{"type":"string","description":"Target textbook level","title":"To Level"},"description":"Target textbook level"},{"name":"max_depth","in":"query","required":false,"schema":{"type":"integer","maximum":5,"minimum":1,"description":"Maximum path depth","default":3,"title":"Max Depth"},"description":"Maximum path depth"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/LearningPathResponse"},"title":"Response Get Learning Path Api V1 Grammar Learning Path Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/grammar/patterns/by-word/{word}":{"get":{"tags":["grammar","grammar"],"summary":"Get Patterns By Word","description":"Get grammar patterns that use a specific Japanese word","operationId":"get_patterns_by_word_api_v1_grammar_patterns_by_word__word__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"word","in":"path","required":true,"schema":{"type":"string","title":"Word"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":50,"minimum":1,"description":"Number of patterns to return","default":10,"title":"Limit"},"description":"Number of patterns to return"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/GrammarPatternResponse"},"title":"Response Get Patterns By Word Api V1 Grammar Patterns By Word  Word  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/grammar/recommendations":{"get":{"tags":["grammar","grammar"],"summary":"Get Pattern Recommendations","description":"Get personalized grammar pattern recommendations","operationId":"get_pattern_recommendations_api_v1_grammar_recommendations_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"user_level","in":"query","required":true,"schema":{"type":"string","description":"User's current textbook level","title":"User Level"},"description":"User's current textbook level"},{"name":"known_patterns","in":"query","required":false,"schema":{"type":"array","items":{"type":"string"},"description":"List of pattern IDs user already knows","default":[],"title":"Known Patterns"},"description":"List of pattern IDs user already knows"},{"name":"focus_classification","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Focus on specific classification","title":"Focus Classification"},"description":"Focus on specific classification"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":20,"minimum":1,"description":"Number of recommendations","default":5,"title":"Limit"},"description":"Number of recommendations"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PatternRecommendationResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/grammar/classifications":{"get":{"tags":["grammar","grammar"],"summary":"Get Classifications","description":"Get all available grammar classifications","operationId":"get_classifications_api_v1_grammar_classifications_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Response Get Classifications Api V1 Grammar Classifications Get"}}}}}}},"/api/v1/grammar/levels":{"get":{"tags":["grammar","grammar"],"summary":"Get Textbook Levels","description":"Get all available textbook levels","operationId":"get_textbook_levels_api_v1_grammar_levels_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Response Get Textbook Levels Api V1 Grammar Levels Get"}}}}}}},"/api/v1/grammar/jfs-categories":{"get":{"tags":["grammar","grammar"],"summary":"Get Jfs Categories","description":"Get all available JFS categories","operationId":"get_jfs_categories_api_v1_grammar_jfs_categories_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Response Get Jfs Categories Api V1 Grammar Jfs Categories Get"}}}}}}},"/api/v1/grammar/stats":{"get":{"tags":["grammar","grammar"],"summary":"Get Grammar Stats","description":"Get comprehensive statistics about the grammar graph","operationId":"get_grammar_stats_api_v1_grammar_stats_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Get Grammar Stats Api V1 Grammar Stats Get"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/v1/grammar/progress/study":{"post":{"tags":["grammar","grammar"],"summary":"Record Pattern Study","description":"Record a study session for a grammar pattern","operationId":"record_pattern_study_api_v1_grammar_progress_study_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PatternProgressRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PatternProgressResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/v1/grammar/progress/patterns":{"get":{"tags":["grammar","grammar"],"summary":"Get User Pattern Progress","description":"Get user's progress for grammar patterns","operationId":"get_user_pattern_progress_api_v1_grammar_progress_patterns_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"pattern_ids","in":"query","required":false,"schema":{"anyOf":[{"type":"array","items":{"type":"string"}},{"type":"null"}],"description":"Specific pattern IDs to get progress for","title":"Pattern Ids"},"description":"Specific pattern IDs to get progress for"},{"name":"include_completed","in":"query","required":false,"schema":{"type":"boolean","description":"Include completed patterns","default":true,"title":"Include Completed"},"description":"Include completed patterns"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":200,"minimum":1,"description":"Maximum number of results","default":50,"title":"Limit"},"description":"Maximum number of results"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/PatternProgressResponse"},"title":"Response Get User Pattern Progress Api V1 Grammar Progress Patterns Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/grammar/progress/due":{"get":{"tags":["grammar","grammar"],"summary":"Get Patterns Due For Review","description":"Get patterns due for review today","operationId":"get_patterns_due_for_review_api_v1_grammar_progress_due_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"include_overdue","in":"query","required":false,"schema":{"type":"boolean","description":"Include overdue patterns","default":true,"title":"Include Overdue"},"description":"Include overdue patterns"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"Maximum number of results","default":20,"title":"Limit"},"description":"Maximum number of results"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/PatternProgressResponse"},"title":"Response Get Patterns Due For Review Api V1 Grammar Progress Due Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/grammar/progress/summary":{"get":{"tags":["grammar","grammar"],"summary":"Get User Progress Summary","description":"Get comprehensive progress summary for the user","operationId":"get_user_progress_summary_api_v1_grammar_progress_summary_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserProgressSummaryResponse"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/v1/grammar/progress/learning-path-stats":{"get":{"tags":["grammar","grammar"],"summary":"Get Learning Path Stats","description":"Get statistics for a specific learning path","operationId":"get_learning_path_stats_api_v1_grammar_progress_learning_path_stats_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"pattern_ids","in":"query","required":true,"schema":{"type":"array","items":{"type":"string"},"description":"Pattern IDs in the learning path","title":"Pattern Ids"},"description":"Pattern IDs in the learning path"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LearningPathStatsResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/grammar/patterns/{pattern_id}/ai-overview":{"get":{"tags":["grammar","grammar"],"summary":"Get Ai Overview","description":"Get stored AI overview for a grammar pattern if available.","operationId":"get_ai_overview_api_v1_grammar_patterns__pattern_id__ai_overview_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"pattern_id","in":"path","required":true,"schema":{"type":"string","title":"Pattern Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GrammarOverviewResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["grammar","grammar"],"summary":"Generate Ai Overview","description":"Generate AI overview using graph context; persists to Neo4j for caching.","operationId":"generate_ai_overview_api_v1_grammar_patterns__pattern_id__ai_overview_post","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"pattern_id","in":"path","required":true,"schema":{"type":"string","title":"Pattern Id"}},{"name":"provider","in":"query","required":false,"schema":{"type":"string","pattern":"^(openai|gemini)$","default":"openai","title":"Provider"}},{"name":"model","in":"query","required":false,"schema":{"type":"string","default":"gpt-4o-mini","title":"Model"}},{"name":"force","in":"query","required":false,"schema":{"type":"boolean","default":false,"title":"Force"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GrammarOverviewResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/grammar/conversation/start":{"post":{"tags":["grammar","grammar"],"summary":"Start Conversation Practice","description":"Start an AI-powered conversation practice session","operationId":"start_conversation_practice_api_v1_grammar_conversation_start_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConversationScenarioRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConversationScenarioResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/v1/grammar/conversation/turn":{"post":{"tags":["grammar","grammar"],"summary":"Continue Conversation","description":"Continue an AI conversation with user input and get feedback","operationId":"continue_conversation_api_v1_grammar_conversation_turn_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConversationTurnRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DialogueTurnResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/v1/grammar/conversation/contexts":{"get":{"tags":["grammar","grammar"],"summary":"Get Conversation Contexts","description":"Get available conversation contexts for practice","operationId":"get_conversation_contexts_api_v1_grammar_conversation_contexts_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"additionalProperties":{"type":"string"},"type":"object"},"type":"array","title":"Response Get Conversation Contexts Api V1 Grammar Conversation Contexts Get"}}}}}}},"/api/v1/grammar/patterns/{pattern_id}/validate":{"post":{"tags":["grammar","grammar"],"summary":"Validate Pattern","description":"Validate a grammar pattern (admin only)","operationId":"validate_pattern_api_v1_grammar_patterns__pattern_id__validate_post","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"pattern_id","in":"path","required":true,"schema":{"type":"string","title":"Pattern Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/grammar/import/marugoto":{"post":{"tags":["grammar","grammar"],"summary":"Import Marugoto Data","description":"Trigger Marugoto data import (admin only)","operationId":"import_marugoto_data_api_v1_grammar_import_marugoto_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/v1/conversations/sessions":{"post":{"tags":["conversations"],"summary":"Create Session","operationId":"create_session_api_v1_conversations_sessions_post","security":[{"OAuth2PasswordBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Payload"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["conversations"],"summary":"List Sessions","operationId":"list_sessions_api_v1_conversations_sessions_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":20,"title":"Limit"}},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Offset"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/conversations/sessions/{session_id}":{"get":{"tags":["conversations"],"summary":"Get Session","operationId":"get_session_api_v1_conversations_sessions__session_id__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"session_id","in":"path","required":true,"schema":{"type":"string","title":"Session Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["conversations"],"summary":"Update Session","description":"Update session metadata (currently only title).","operationId":"update_session_api_v1_conversations_sessions__session_id__put","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"session_id","in":"path","required":true,"schema":{"type":"string","title":"Session Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Payload"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["conversations"],"summary":"Delete Session","operationId":"delete_session_api_v1_conversations_sessions__session_id__delete","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"session_id","in":"path","required":true,"schema":{"type":"string","title":"Session Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/conversations/sessions/{session_id}/messages":{"post":{"tags":["conversations"],"summary":"Add Message","operationId":"add_message_api_v1_conversations_sessions__session_id__messages_post","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"session_id","in":"path","required":true,"schema":{"type":"string","title":"Session Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Payload"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["conversations"],"summary":"List Messages","operationId":"list_messages_api_v1_conversations_sessions__session_id__messages_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"session_id","in":"path","required":true,"schema":{"type":"string","title":"Session Id"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":50,"title":"Limit"}},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Offset"}},{"name":"ascending","in":"query","required":false,"schema":{"type":"boolean","default":true,"title":"Ascending"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/conversations/search":{"get":{"tags":["conversations"],"summary":"Search Messages","description":"Simple message text search across user's sessions (ILIKE).","operationId":"search_messages_api_v1_conversations_search_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"q","in":"query","required":true,"schema":{"type":"string","title":"Q"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":50,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/conversations/sessions/{session_id}/stream":{"get":{"tags":["conversations"],"summary":"Stream Assistant Reply","description":"Stream an assistant reply for the current session via Server-Sent Events (SSE).\n\nReturns text/event-stream with data: <delta chunk> lines and a final [DONE].","operationId":"stream_assistant_reply_api_v1_conversations_sessions__session_id__stream_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"session_id","in":"path","required":true,"schema":{"type":"string","title":"Session Id"}},{"name":"neo4j_session","in":"query","required":false,"schema":{"title":"Neo4J Session"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/knowledge/search":{"post":{"tags":["knowledge"],"summary":"Search Knowledge Graph","description":"Search the comprehensive knowledge graph.\n\nSupports multiple search modes:\n- semantic: Vector similarity search\n- graph: Neo4j graph traversal\n- hybrid: Combined approach (recommended)\n- synonym: Synonym relationship search\n- domain: Semantic domain search\n- difficulty: Difficulty-based search","operationId":"search_knowledge_graph_api_v1_knowledge_search_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SearchRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SearchResults"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/knowledge/search/quick/{query}":{"get":{"tags":["knowledge"],"summary":"Quick Search","description":"Quick search endpoint for simple queries.","operationId":"quick_search_api_v1_knowledge_search_quick__query__get","parameters":[{"name":"query","in":"path","required":true,"schema":{"type":"string","title":"Query"}},{"name":"mode","in":"query","required":false,"schema":{"$ref":"#/components/schemas/SearchMode","default":"hybrid"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":10,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/knowledge/word/{word_kanji}/similar":{"get":{"tags":["knowledge"],"summary":"Find Similar Words","description":"Find words similar to the given word using embeddings and graph relationships.","operationId":"find_similar_words_api_v1_knowledge_word__word_kanji__similar_get","parameters":[{"name":"word_kanji","in":"path","required":true,"schema":{"type":"string","title":"Word Kanji"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":10,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/knowledge/difficulty/{level}":{"get":{"tags":["knowledge"],"summary":"Search By Difficulty","description":"Search words by difficulty level (e.g., 'beginner', '1', 'åç´åå').","operationId":"search_by_difficulty_api_v1_knowledge_difficulty__level__get","parameters":[{"name":"level","in":"path","required":true,"schema":{"type":"string","title":"Level"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":20,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/knowledge/domain/{domain}":{"get":{"tags":["knowledge"],"summary":"Search By Semantic Domain","description":"Search words within a semantic domain.","operationId":"search_by_semantic_domain_api_v1_knowledge_domain__domain__get","parameters":[{"name":"domain","in":"path","required":true,"schema":{"type":"string","title":"Domain"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":20,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/knowledge/generate-content":{"post":{"tags":["knowledge"],"summary":"Generate Learning Content","description":"Generate comprehensive learning content for a word.\n\nLeverages the rich knowledge graph to create:\n- Grammar explanations\n- Usage examples with context\n- Cultural notes\n- Synonym explanations\n- Practice exercises\n- Mnemonics","operationId":"generate_learning_content_api_v1_knowledge_generate_content_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ContentGenerationRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/GeneratedContent"},"type":"array","title":"Response Generate Learning Content Api V1 Knowledge Generate Content Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/knowledge/word/{word_kanji}/content":{"get":{"tags":["knowledge"],"summary":"Get Word Content","description":"Generate content for a specific word with optional content type filtering.","operationId":"get_word_content_api_v1_knowledge_word__word_kanji__content_get","parameters":[{"name":"word_kanji","in":"path","required":true,"schema":{"type":"string","title":"Word Kanji"}},{"name":"content_types","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Content Types"}},{"name":"ai_provider","in":"query","required":false,"schema":{"type":"string","default":"openai","title":"Ai Provider"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/knowledge/word/{word_kanji}/context":{"get":{"tags":["knowledge"],"summary":"Get Word Context","description":"Get rich context for a word from the knowledge graph.","operationId":"get_word_context_api_v1_knowledge_word__word_kanji__context_get","parameters":[{"name":"word_kanji","in":"path","required":true,"schema":{"type":"string","title":"Word Kanji"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/knowledge/embeddings/generate":{"post":{"tags":["knowledge"],"summary":"Generate Embeddings","description":"Generate embeddings for all words in the knowledge graph.\n\nThis is a background task that can take several minutes to complete.\nUse this to populate the vector search index.","operationId":"generate_embeddings_api_v1_knowledge_embeddings_generate_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EmbeddingRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/knowledge/embeddings/status":{"get":{"tags":["knowledge"],"summary":"Get Embedding Status","description":"Get the status of embedding generation.","operationId":"get_embedding_status_api_v1_knowledge_embeddings_status_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/knowledge/stats":{"get":{"tags":["knowledge"],"summary":"Get Knowledge Graph Stats","description":"Get comprehensive statistics about the knowledge graph.","operationId":"get_knowledge_graph_stats_api_v1_knowledge_stats_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/knowledge/health":{"get":{"tags":["knowledge"],"summary":"Knowledge Service Health","description":"Health check for knowledge services.","operationId":"knowledge_service_health_api_v1_knowledge_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/content/analyze":{"post":{"tags":["content"],"summary":"Analyze Content","description":"Analyze submitted text and return a minimal structured result.\n\nThis is a simple, deterministic implementation to unblock\nPhase 2 integration and testing. It does not call external AI\nproviders yet.","operationId":"analyze_content_api_v1_content_analyze_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ContentSubmission"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AnalysisResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/content/analyze-url":{"post":{"tags":["content"],"summary":"Analyze Url","operationId":"analyze_url_api_v1_content_analyze_url_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UrlSubmission"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AnalysisResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/content/analyze-upload":{"post":{"tags":["content"],"summary":"Analyze Upload","operationId":"analyze_upload_api_v1_content_analyze_upload_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_analyze_upload_api_v1_content_analyze_upload_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AnalysisResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/content/analyze-persist":{"post":{"tags":["content"],"summary":"Analyze And Persist","description":"Analyze text then persist a minimal node and source in Neo4j if available.","operationId":"analyze_and_persist_api_v1_content_analyze_persist_post","parameters":[{"name":"min_confidence","in":"query","required":false,"schema":{"type":"number","maximum":1.0,"minimum":0.0,"default":0.7,"title":"Min Confidence"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ContentSubmission"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AnalysisResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/content/term":{"get":{"tags":["content"],"summary":"Get Term","description":"Verify if a persisted term (and optionally its source) exists in Neo4j.","operationId":"get_term_api_v1_content_term_get","parameters":[{"name":"value","in":"query","required":true,"schema":{"type":"string","title":"Value"}},{"name":"title","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Title"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get Term Api V1 Content Term Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/ai-content/generate":{"post":{"tags":["ai-content","ai-content"],"summary":"Generate Word Content","description":"Generate AI-enhanced content for a word\n\nArgs:\n    request: Word content generation request\n    session: Neo4j database session\n    current_user: Current authenticated user\n    \nReturns:\n    Generated word content with AI enhancements","operationId":"generate_word_content_api_v1_ai_content_generate_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/WordContentRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/WordContentResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/v1/ai-content/word/{word_kanji}":{"get":{"tags":["ai-content","ai-content"],"summary":"Get Word Content","description":"Get AI-enhanced content for a word\n\nArgs:\n    word_kanji: The kanji of the word\n    session: Neo4j database session\n    current_user: Current authenticated user\n    \nReturns:\n    Word content with AI enhancements","operationId":"get_word_content_api_v1_ai_content_word__word_kanji__get","parameters":[{"name":"word_kanji","in":"path","required":true,"schema":{"type":"string","title":"Word Kanji"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/WordContentResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/ai-content/word/{word_kanji}/level/{target_level}":{"get":{"tags":["ai-content","ai-content"],"summary":"Get Word Content By Level","description":"Get AI-enhanced content for a word filtered by JLPT level\n\nArgs:\n    word_kanji: The kanji of the word\n    target_level: JLPT level (N5, N4, N3, N2, N1)\n    session: Neo4j database session\n    current_user: Current authenticated user\n    \nReturns:\n    Word content with AI enhancements for the specified level","operationId":"get_word_content_by_level_api_v1_ai_content_word__word_kanji__level__target_level__get","parameters":[{"name":"word_kanji","in":"path","required":true,"schema":{"type":"string","title":"Word Kanji"}},{"name":"target_level","in":"path","required":true,"schema":{"type":"string","title":"Target Level"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/WordContentResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/ai-content/regenerate/{word_kanji}":{"post":{"tags":["ai-content","ai-content"],"summary":"Regenerate Word Content","description":"Force regenerate AI content for a word\n\nArgs:\n    word_kanji: The kanji of the word\n    session: Neo4j database session\n    current_user: Current authenticated user\n    \nReturns:\n    Regenerated word content with AI enhancements","operationId":"regenerate_word_content_api_v1_ai_content_regenerate__word_kanji__post","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"word_kanji","in":"path","required":true,"schema":{"type":"string","title":"Word Kanji"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/WordContentResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/ai-content/status/{word_kanji}":{"get":{"tags":["ai-content","ai-content"],"summary":"Get Content Status","description":"Check the status of AI content for a word\n\nArgs:\n    word_kanji: The kanji of the word\n    session: Neo4j database session\n    current_user: Current authenticated user\n    \nReturns:\n    Content status information","operationId":"get_content_status_api_v1_ai_content_status__word_kanji__get","parameters":[{"name":"word_kanji","in":"path","required":true,"schema":{"type":"string","title":"Word Kanji"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get Content Status Api V1 Ai Content Status  Word Kanji  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/ai-content/words-needing-content":{"get":{"tags":["ai-content","ai-content"],"summary":"Get Words Needing Content","description":"Get list of words that need AI content generation\n\nArgs:\n    limit: Maximum number of words to return\n    difficulty_min: Minimum difficulty level\n    difficulty_max: Maximum difficulty level\n    session: Neo4j database session\n    current_user: Current authenticated user\n    \nReturns:\n    List of words needing content generation","operationId":"get_words_needing_content_api_v1_ai_content_words_needing_content_get","parameters":[{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":200,"minimum":1,"default":50,"title":"Limit"}},{"name":"difficulty_min","in":"query","required":false,"schema":{"type":"integer","maximum":6,"minimum":1,"default":1,"title":"Difficulty Min"}},{"name":"difficulty_max","in":"query","required":false,"schema":{"type":"integer","maximum":6,"minimum":1,"default":6,"title":"Difficulty Max"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get Words Needing Content Api V1 Ai Content Words Needing Content Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/learning/dashboard":{"get":{"tags":["learning"],"summary":"Get Dashboard","operationId":"get_dashboard_api_v1_learning_dashboard_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DashboardResponse"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/v1/learning/diagnostic/quiz":{"get":{"tags":["learning"],"summary":"Get Diagnostic Quiz","operationId":"get_diagnostic_quiz_api_v1_learning_diagnostic_quiz_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/DiagnosticQuizQuestion"},"type":"array","title":"Response Get Diagnostic Quiz Api V1 Learning Diagnostic Quiz Get"}}}}}}},"/api/v1/learning/diagnostic/grade":{"post":{"tags":["learning"],"summary":"Grade Diagnostic Quiz","operationId":"grade_diagnostic_quiz_api_v1_learning_diagnostic_grade_post","requestBody":{"content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/DiagnosticQuizResponse"},"type":"array","title":"Responses"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DiagnosticQuizResult"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/v1/srs/schedule":{"post":{"tags":["srs"],"summary":"Schedule Review","operationId":"schedule_review_api_v1_srs_schedule_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SRSRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SRSResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/analytics/summary":{"get":{"tags":["analytics"],"summary":"Get Conversation Summary","operationId":"get_conversation_summary_api_v1_analytics_summary_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConversationSummary"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/v1/analytics/messages_per_day":{"get":{"tags":["analytics"],"summary":"Messages Per Day","description":"Return message counts per day for the past N days (UTC).","operationId":"messages_per_day_api_v1_analytics_messages_per_day_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"days","in":"query","required":false,"schema":{"type":"integer","default":14,"title":"Days"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"type":"object","additionalProperties":true},"title":"Response Messages Per Day Api V1 Analytics Messages Per Day Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/analytics/sessions_per_week":{"get":{"tags":["analytics"],"summary":"Sessions Per Week","description":"Return session counts per week for the past N weeks (UTC).","operationId":"sessions_per_week_api_v1_analytics_sessions_per_week_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"weeks","in":"query","required":false,"schema":{"type":"integer","default":8,"title":"Weeks"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"type":"object","additionalProperties":true},"title":"Response Sessions Per Week Api V1 Analytics Sessions Per Week Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/admin/health":{"get":{"tags":["admin"],"summary":"Admin Health","operationId":"admin_health_api_v1_admin_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AdminHealth"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/v1/lexical/lessons/activate":{"get":{"tags":["lexical"],"summary":"Activate Cando","description":"Return a LessonPlan JSON for the given CanDoDescriptor id.\n\nMVP: loads compiled lesson_plan.json; later: graph-first enrichment.","operationId":"activate_cando_api_v1_lexical_lessons_activate_get","parameters":[{"name":"can_do_id","in":"query","required":true,"schema":{"type":"string","title":"Can Do Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Activate Cando Api V1 Lexical Lessons Activate Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/lexical/lessons/generate-exercises":{"post":{"tags":["lexical"],"summary":"Generate Exercises","description":"Compatibility endpoint: returns a minimal exercise bundle from compiled resources.\n\nThis satisfies initial MCP scenario expectations until full GenerateExercises is implemented.","operationId":"generate_exercises_api_v1_lexical_lessons_generate_exercises_post","parameters":[{"name":"can_do_id","in":"query","required":true,"schema":{"type":"string","description":"CanDoDescriptor ID","title":"Can Do Id"},"description":"CanDoDescriptor ID"},{"name":"n","in":"query","required":false,"schema":{"type":"integer","maximum":20,"minimum":1,"default":3,"title":"N"}},{"name":"modes","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Comma-separated modes (e.g. writing,dialog)","title":"Modes"},"description":"Comma-separated modes (e.g. writing,dialog)"},{"name":"phase","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Phase key (lexicon_and_patterns|guided_dialogue|open_dialogue)","title":"Phase"},"description":"Phase key (lexicon_and_patterns|guided_dialogue|open_dialogue)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Generate Exercises Api V1 Lexical Lessons Generate Exercises Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/lexical/lessons/phase-gate":{"post":{"tags":["lexical"],"summary":"Phase Gate","description":"Compute next phase based on completion or score mode (feature-flagged).","operationId":"phase_gate_api_v1_lexical_lessons_phase_gate_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PhaseState"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Phase Gate Api V1 Lexical Lessons Phase Gate Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/lexical/lessons/sample-dialog":{"get":{"tags":["lexical"],"summary":"Get Sample Dialog","description":"Return compiled SampleDialog JSON (conventional expressions).","operationId":"get_sample_dialog_api_v1_lexical_lessons_sample_dialog_get","parameters":[{"name":"can_do_id","in":"query","required":true,"schema":{"type":"string","title":"Can Do Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get Sample Dialog Api V1 Lexical Lessons Sample Dialog Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/lexical/lessons/stages":{"get":{"tags":["lexical"],"summary":"Get Stages","description":"Return compiled StagedExercises (phased integration).","operationId":"get_stages_api_v1_lexical_lessons_stages_get","parameters":[{"name":"can_do_id","in":"query","required":true,"schema":{"type":"string","title":"Can Do Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get Stages Api V1 Lexical Lessons Stages Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/lexical/lessons/package":{"get":{"tags":["lexical"],"summary":"Get Lesson Package","description":"Return a combined lesson package for the given CanDo (compiled + pragmatics).","operationId":"get_lesson_package_api_v1_lexical_lessons_package_get","parameters":[{"name":"can_do_id","in":"query","required":true,"schema":{"type":"string","description":"CanDoDescriptor ID","title":"Can Do Id"},"description":"CanDoDescriptor ID"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get Lesson Package Api V1 Lexical Lessons Package Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/lexical/lessons/version":{"get":{"tags":["lexical"],"summary":"Get Lesson Version","description":"Return stored lesson version JSONs from Postgres (lesson_plan, exercises, manifest, dialogs).","operationId":"get_lesson_version_api_v1_lexical_lessons_version_get","parameters":[{"name":"can_do_id","in":"query","required":true,"schema":{"type":"string","title":"Can Do Id"}},{"name":"version","in":"query","required":false,"schema":{"type":"integer","minimum":1,"default":1,"title":"Version"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get Lesson Version Api V1 Lexical Lessons Version Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/lexical/lessons/grade":{"post":{"tags":["lexical"],"summary":"Grade Response","description":"Grade an exercise response using the heuristic MVP grader.","operationId":"grade_response_api_v1_lexical_lessons_grade_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GradeRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Grade Response Api V1 Lexical Lessons Grade Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/lexical/lessons/grade-store":{"post":{"tags":["lexical"],"summary":"Grade And Store","description":"Grade an exercise, persist attempt to Postgres, and update mastery in Neo4j.","operationId":"grade_and_store_api_v1_lexical_lessons_grade_store_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GradeStoreRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Grade And Store Api V1 Lexical Lessons Grade Store Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/lexical/lessons/update-mastery":{"post":{"tags":["lexical"],"summary":"Update Mastery","operationId":"update_mastery_api_v1_lexical_lessons_update_mastery_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MasteryUpdateRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Update Mastery Api V1 Lexical Lessons Update Mastery Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/lexical/lessons/recommend-next":{"get":{"tags":["lexical"],"summary":"Recommend Next","operationId":"recommend_next_api_v1_lexical_lessons_recommend_next_get","parameters":[{"name":"can_do_id","in":"query","required":true,"schema":{"type":"string","title":"Can Do Id"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":10,"minimum":1,"default":5,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Recommend Next Api V1 Lexical Lessons Recommend Next Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/lexical/lessons/persist":{"post":{"tags":["lexical"],"summary":"Persist Lesson","description":"Persist compiled lesson artifacts to Postgres and link Neo4j Lesson node.\n\nReturns {lesson_id, version, can_do_id}.","operationId":"persist_lesson_api_v1_lexical_lessons_persist_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PersistLessonIn"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Persist Lesson Api V1 Lexical Lessons Persist Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/lexical/lessons/pragmatics":{"get":{"tags":["lexical"],"summary":"Get Pragmatics","description":"Fetch pragmatic patterns for a CanDo (graph-first, compiled fallback).","operationId":"get_pragmatics_api_v1_lexical_lessons_pragmatics_get","parameters":[{"name":"can_do_id","in":"query","required":true,"schema":{"type":"string","description":"CanDoDescriptor ID","title":"Can Do Id"},"description":"CanDoDescriptor ID"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get Pragmatics Api V1 Lexical Lessons Pragmatics Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/lexical/lessons/pragmatics/import":{"post":{"tags":["lexical"],"summary":"Import Pragmatics","description":"Import pragmatic patterns from compiled JSON into Neo4j and link.","operationId":"import_pragmatics_api_v1_lexical_lessons_pragmatics_import_post","parameters":[{"name":"can_do_id","in":"query","required":true,"schema":{"type":"string","description":"CanDoDescriptor ID","title":"Can Do Id"},"description":"CanDoDescriptor ID"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Import Pragmatics Api V1 Lexical Lessons Pragmatics Import Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/lexical/node/{word}":{"get":{"tags":["lexical"],"summary":"Get Node Details","description":"Get detailed information about a specific word node.\n\nReturns comprehensive node information including:\n- Basic word data (kanji, hiragana, translation, POS, level)\n- Neighbors with relationship details (synonym strength, relation type)\n- Connection statistics\n- Domain and etymology information","operationId":"get_node_details_api_v1_lexical_node__word__get","parameters":[{"name":"word","in":"path","required":true,"schema":{"type":"string","title":"Word"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get Node Details Api V1 Lexical Node  Word  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/lexical/graph":{"get":{"tags":["lexical"],"summary":"Get Lexical Graph","description":"Fetch a subgraph from the lexical graph centered on a specific node.","operationId":"get_lexical_graph_api_v1_lexical_graph_get","parameters":[{"name":"center","in":"query","required":true,"schema":{"type":"string","title":"Center"}},{"name":"searchField","in":"query","required":false,"schema":{"type":"string","default":"kanji","title":"Searchfield"}},{"name":"depth","in":"query","required":false,"schema":{"type":"integer","default":1,"title":"Depth"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get Lexical Graph Api V1 Lexical Graph Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/lexical/lessons/seed":{"get":{"tags":["lexical"],"summary":"Seed Lexical Words","operationId":"seed_lexical_words_api_v1_lexical_lessons_seed_get","parameters":[{"name":"level","in":"query","required":false,"schema":{"type":"integer","maximum":6,"minimum":1,"default":1,"title":"Level"}},{"name":"count","in":"query","required":false,"schema":{"type":"integer","maximum":50,"minimum":1,"default":12,"title":"Count"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Seed Lexical Words Api V1 Lexical Lessons Seed Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/lexical/lessons/generate":{"post":{"tags":["lexical"],"summary":"Generate Lexical Lesson","operationId":"generate_lexical_lesson_api_v1_lexical_lessons_generate_post","parameters":[{"name":"word","in":"query","required":true,"schema":{"type":"string","description":"Target word kanji/hiragana/lemma","title":"Word"},"description":"Target word kanji/hiragana/lemma"},{"name":"level","in":"query","required":false,"schema":{"type":"integer","maximum":6,"minimum":1,"default":1,"title":"Level"}},{"name":"provider","in":"query","required":false,"schema":{"type":"string","pattern":"^(openai|gemini)$","default":"openai","title":"Provider"}},{"name":"model","in":"query","required":false,"schema":{"type":"string","default":"gpt-4o-mini","title":"Model"}},{"name":"analyze_readability","in":"query","required":false,"schema":{"type":"boolean","default":true,"title":"Analyze Readability"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Generate Lexical Lesson Api V1 Lexical Lessons Generate Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/lexical/readability":{"post":{"tags":["lexical"],"summary":"Analyze Readability","operationId":"analyze_readability_api_v1_lexical_readability_post","parameters":[{"name":"text","in":"query","required":true,"schema":{"type":"string","description":"Japanese text to analyze","title":"Text"},"description":"Japanese text to analyze"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Analyze Readability Api V1 Lexical Readability Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/lexical/lessons/attempt":{"post":{"tags":["lexical"],"summary":"Record Lexical Lesson Attempt","description":"Record a lexical lesson attempt as a conversation session/message for analytics.\n\nCreates (or reuses) an active 'lesson' session and stores a message summarizing the attempt.","operationId":"record_lexical_lesson_attempt_api_v1_lexical_lessons_attempt_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LessonAttemptIn"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/v1/cando/list":{"get":{"tags":["cando"],"summary":"List Cando","operationId":"list_cando_api_v1_cando_list_get","parameters":[{"name":"q","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Search in uid or primaryTopic","title":"Q"},"description":"Search in uid or primaryTopic"},{"name":"level","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Level"}},{"name":"topic","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Topic"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":1000,"minimum":1,"default":100,"title":"Limit"}},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"default":0,"title":"Offset"}},{"name":"sort","in":"query","required":false,"schema":{"anyOf":[{"type":"string","pattern":"^(level|topic)$"},{"type":"null"}],"default":"level","title":"Sort"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response List Cando Api V1 Cando List Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/cando/lessons/package":{"get":{"tags":["cando"],"summary":"Get Lesson Package","description":"Return a combined lesson package; fallback to minimal package if compiled assets are missing.","operationId":"get_lesson_package_api_v1_cando_lessons_package_get","parameters":[{"name":"can_do_id","in":"query","required":true,"schema":{"type":"string","title":"Can Do Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get Lesson Package Api V1 Cando Lessons Package Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/cando/lessons/generate-exercises":{"post":{"tags":["cando"],"summary":"Generate Exercises","description":"Generate real exercises using AI and graph seeds (no mock).","operationId":"generate_exercises_api_v1_cando_lessons_generate_exercises_post","parameters":[{"name":"can_do_id","in":"query","required":true,"schema":{"type":"string","title":"Can Do Id"}},{"name":"n","in":"query","required":false,"schema":{"type":"integer","maximum":20,"minimum":1,"default":3,"title":"N"}},{"name":"modes","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Modes"}},{"name":"phase","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phase"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Generate Exercises Api V1 Cando Lessons Generate Exercises Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/cando/lessons/stages":{"get":{"tags":["cando"],"summary":"Get Stages","operationId":"get_stages_api_v1_cando_lessons_stages_get","parameters":[{"name":"can_do_id","in":"query","required":true,"schema":{"type":"string","title":"Can Do Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get Stages Api V1 Cando Lessons Stages Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/cando/lessons/pragmatics":{"get":{"tags":["cando"],"summary":"Get Pragmatics","operationId":"get_pragmatics_api_v1_cando_lessons_pragmatics_get","parameters":[{"name":"can_do_id","in":"query","required":true,"schema":{"type":"string","title":"Can Do Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get Pragmatics Api V1 Cando Lessons Pragmatics Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/cando/lessons/start":{"post":{"tags":["cando"],"summary":"Start Lesson","operationId":"start_lesson_api_v1_cando_lessons_start_post","parameters":[{"name":"can_do_id","in":"query","required":true,"schema":{"type":"string","title":"Can Do Id"}},{"name":"phase","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phase"}},{"name":"provider","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"default":"gemini","title":"Provider"}},{"name":"level","in":"query","required":false,"schema":{"anyOf":[{"type":"integer","maximum":6,"minimum":1},{"type":"null"}],"title":"Level"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Start Lesson Api V1 Cando Lessons Start Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/cando/lessons/turn":{"post":{"tags":["cando"],"summary":"Lesson Turn","operationId":"lesson_turn_api_v1_cando_lessons_turn_post","parameters":[{"name":"session_id","in":"query","required":true,"schema":{"type":"string","title":"Session Id"}},{"name":"message","in":"query","required":true,"schema":{"type":"string","title":"Message"}},{"name":"provider","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"default":"gemini","title":"Provider"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Lesson Turn Api V1 Cando Lessons Turn Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/cando/lessons/compile":{"post":{"tags":["cando"],"summary":"Compile Lesson","description":"Compile a MasterLesson for a CanDo and persist it to Postgres; link in Neo4j.","operationId":"compile_lesson_api_v1_cando_lessons_compile_post","parameters":[{"name":"can_do_id","in":"query","required":true,"schema":{"type":"string","title":"Can Do Id"}},{"name":"version","in":"query","required":false,"schema":{"type":"integer","minimum":1,"default":1,"title":"Version"}},{"name":"provider","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"default":"openai","title":"Provider"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Compile Lesson Api V1 Cando Lessons Compile Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/cando/count":{"get":{"tags":["cando"],"summary":"Count Cando","operationId":"count_cando_api_v1_cando_count_get","parameters":[{"name":"q","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Search in uid or primaryTopic","title":"Q"},"description":"Search in uid or primaryTopic"},{"name":"level","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Level"}},{"name":"topic","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Topic"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Count Cando Api V1 Cando Count Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/cando/levels":{"get":{"tags":["cando"],"summary":"List Levels","operationId":"list_levels_api_v1_cando_levels_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response List Levels Api V1 Cando Levels Get"}}}}}}},"/api/v1/cando/topics":{"get":{"tags":["cando"],"summary":"List Topics","operationId":"list_topics_api_v1_cando_topics_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response List Topics Api V1 Cando Topics Get"}}}}}}},"/health":{"get":{"summary":"Health Check","description":"Health check endpoint.\n\nReturns:\n    JSONResponse: Application health status.","operationId":"health_check_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/":{"get":{"summary":"Root","description":"Root endpoint.\n\nReturns:\n    dict: Welcome message and API information.","operationId":"root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object","title":"Response Root  Get"}}}}}}},"/api/lessons/activate":{"get":{"summary":"Activate Lesson Compat","description":"Compatibility endpoint expected by MCP scenarios:\n/api/lessons/activate?can_do_id=...\n\nInternally delegates to lexical_lessons.activate_cando.","operationId":"activate_lesson_compat_api_lessons_activate_get","parameters":[{"name":"can_do_id","in":"query","required":true,"schema":{"type":"string","title":"Can Do Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Activate Lesson Compat Api Lessons Activate Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"AdminHealth":{"properties":{"status":{"type":"string","title":"Status"},"user":{"type":"string","title":"User"}},"type":"object","required":["status","user"],"title":"AdminHealth"},"AnalysisResponse":{"properties":{"status":{"type":"string","title":"Status"},"processed_chars":{"type":"integer","title":"Processed Chars"},"items":{"items":{"$ref":"#/components/schemas/ExtractedItem"},"type":"array","title":"Items"},"source":{"$ref":"#/components/schemas/SourceMetadata"},"analyzed_at":{"type":"string","format":"date-time","title":"Analyzed At"},"persisted":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Persisted"},"persisted_count":{"type":"integer","title":"Persisted Count","default":0}},"type":"object","required":["status","processed_chars","items","source","analyzed_at"],"title":"AnalysisResponse","description":"Structured response for a content analysis request."},"Body_analyze_upload_api_v1_content_analyze_upload_post":{"properties":{"file":{"type":"string","format":"binary","title":"File"},"title":{"type":"string","title":"Title"},"language":{"type":"string","title":"Language","default":"ja"},"author":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Author"},"url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Url"}},"type":"object","required":["file","title"],"title":"Body_analyze_upload_api_v1_content_analyze_upload_post"},"Body_login_for_access_token_api_v1_auth_token_post":{"properties":{"grant_type":{"anyOf":[{"type":"string","pattern":"password"},{"type":"null"}],"title":"Grant Type"},"username":{"type":"string","title":"Username"},"password":{"type":"string","title":"Password"},"scope":{"type":"string","title":"Scope","default":""},"client_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Id"},"client_secret":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Secret"}},"type":"object","required":["username","password"],"title":"Body_login_for_access_token_api_v1_auth_token_post"},"ContentGenerationRequest":{"properties":{"word_kanji":{"type":"string","title":"Word Kanji"},"content_types":{"items":{"$ref":"#/components/schemas/ContentType"},"type":"array","title":"Content Types"},"ai_provider":{"type":"string","title":"Ai Provider","default":"openai"}},"type":"object","required":["word_kanji","content_types"],"title":"ContentGenerationRequest","description":"Content generation request model."},"ContentSubmission":{"properties":{"text":{"type":"string","minLength":1,"title":"Text","description":"Raw text to analyze"},"source":{"$ref":"#/components/schemas/SourceMetadata"}},"type":"object","required":["text","source"],"title":"ContentSubmission","description":"Content submission payload for analysis."},"ContentType":{"type":"string","enum":["grammar_explanation","usage_examples","cultural_notes","practice_exercises","mnemonics","synonym_explanation","difficulty_progression"],"title":"ContentType","description":"Types of content that can be generated."},"ConversationScenarioRequest":{"properties":{"pattern_id":{"type":"string","title":"Pattern Id","description":"Grammar pattern ID"},"context":{"type":"string","title":"Context","description":"Conversation context (restaurant, office, family, etc.)"},"difficulty_level":{"type":"string","title":"Difficulty Level","description":"Difficulty level","default":"intermediate"},"provider":{"type":"string","title":"Provider","description":"AI provider (openai/gemini)","default":"openai"},"custom_scenario":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Custom Scenario","description":"Custom scenario description"}},"type":"object","required":["pattern_id","context"],"title":"ConversationScenarioRequest","description":"Request model for generating conversation scenarios"},"ConversationScenarioResponse":{"properties":{"scenario_id":{"type":"string","title":"Scenario Id"},"pattern_id":{"type":"string","title":"Pattern Id"},"pattern":{"type":"string","title":"Pattern"},"context":{"type":"string","title":"Context"},"situation":{"type":"string","title":"Situation"},"learning_objective":{"type":"string","title":"Learning Objective"},"ai_character":{"type":"string","title":"Ai Character"},"user_role":{"type":"string","title":"User Role"},"difficulty_level":{"type":"string","title":"Difficulty Level"},"initial_dialogue":{"items":{"$ref":"#/components/schemas/DialogueTurnResponse"},"type":"array","title":"Initial Dialogue"}},"type":"object","required":["scenario_id","pattern_id","pattern","context","situation","learning_objective","ai_character","user_role","difficulty_level","initial_dialogue"],"title":"ConversationScenarioResponse","description":"Response model for conversation scenarios"},"ConversationSummary":{"properties":{"total_sessions":{"type":"integer","title":"Total Sessions"},"total_messages":{"type":"integer","title":"Total Messages"},"avg_messages_per_session":{"type":"number","title":"Avg Messages Per Session"},"last_message_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Message At"}},"type":"object","required":["total_sessions","total_messages","avg_messages_per_session","last_message_at"],"title":"ConversationSummary"},"ConversationTurnRequest":{"properties":{"scenario_id":{"type":"string","title":"Scenario Id","description":"Scenario ID"},"user_message":{"type":"string","title":"User Message","description":"User's message in Japanese"},"provider":{"type":"string","title":"Provider","description":"AI provider","default":"openai"},"pattern_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Pattern Id","description":"Grammar pattern ID for learning focus"},"context":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Context","description":"Conversation context"}},"type":"object","required":["scenario_id","user_message"],"title":"ConversationTurnRequest","description":"Request model for conversation turns"},"DashboardResponse":{"properties":{"user_id":{"type":"string","title":"User Id"},"total_sessions":{"type":"integer","title":"Total Sessions"},"total_messages":{"type":"integer","title":"Total Messages"},"last_session_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Session At"}},"type":"object","required":["user_id","total_sessions","total_messages","last_session_at"],"title":"DashboardResponse","description":"Minimal personalized dashboard summary."},"DiagnosticQuizQuestion":{"properties":{"id":{"type":"string","title":"Id"},"type":{"type":"string","title":"Type"},"question":{"type":"string","title":"Question"},"options":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Options"},"correct_answer":{"type":"string","title":"Correct Answer"},"difficulty_level":{"type":"string","title":"Difficulty Level"},"skill_area":{"type":"string","title":"Skill Area"}},"type":"object","required":["id","type","question","correct_answer","difficulty_level","skill_area"],"title":"DiagnosticQuizQuestion","description":"Diagnostic quiz question."},"DiagnosticQuizResponse":{"properties":{"question_id":{"type":"string","title":"Question Id"},"user_answer":{"type":"string","title":"User Answer"},"is_correct":{"type":"boolean","title":"Is Correct"},"time_taken_seconds":{"type":"integer","title":"Time Taken Seconds"}},"type":"object","required":["question_id","user_answer","is_correct","time_taken_seconds"],"title":"DiagnosticQuizResponse","description":"User's response to diagnostic quiz."},"DiagnosticQuizResult":{"properties":{"user_id":{"type":"string","format":"uuid","title":"User Id"},"assessed_level":{"type":"string","title":"Assessed Level"},"confidence_score":{"type":"number","title":"Confidence Score"},"skill_breakdown":{"additionalProperties":{"type":"number"},"type":"object","title":"Skill Breakdown"},"recommendations":{"items":{"type":"string"},"type":"array","title":"Recommendations"},"suggested_learning_path":{"items":{"type":"string"},"type":"array","title":"Suggested Learning Path"},"completed_at":{"type":"string","format":"date-time","title":"Completed At"}},"type":"object","required":["user_id","assessed_level","confidence_score","skill_breakdown","recommendations","suggested_learning_path","completed_at"],"title":"DiagnosticQuizResult","description":"Diagnostic quiz results."},"DialogueTurnResponse":{"properties":{"speaker":{"type":"string","title":"Speaker"},"message":{"type":"string","title":"Message"},"transliteration":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Transliteration"},"translation":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Translation"},"feedback":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Feedback"},"user_feedback":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"User Feedback"},"grammar_focus":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Grammar Focus"},"corrections":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Corrections"},"hints":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Hints"}},"type":"object","required":["speaker","message"],"title":"DialogueTurnResponse","description":"Response model for dialogue turns"},"EmbeddingRequest":{"properties":{"batch_size":{"type":"integer","title":"Batch Size","default":100},"provider":{"type":"string","title":"Provider","default":"openai"}},"type":"object","title":"EmbeddingRequest","description":"Embedding generation request model."},"ExtractedItem":{"properties":{"kind":{"type":"string","title":"Kind"},"value":{"type":"string","title":"Value"},"confidence":{"type":"number","maximum":1.0,"minimum":0.0,"title":"Confidence"}},"type":"object","required":["kind","value","confidence"],"title":"ExtractedItem","description":"A minimal representation of an extracted knowledge item."},"GeneratedContent":{"properties":{"content_type":{"$ref":"#/components/schemas/ContentType"},"target_word":{"type":"string","title":"Target Word"},"content":{"type":"string","title":"Content"},"confidence_score":{"type":"number","title":"Confidence Score"},"ai_provider":{"type":"string","title":"Ai Provider"},"ai_model":{"type":"string","title":"Ai Model"},"source_data":{"additionalProperties":true,"type":"object","title":"Source Data"},"validation_status":{"type":"string","title":"Validation Status","default":"pending"}},"type":"object","required":["content_type","target_word","content","confidence_score","ai_provider","ai_model","source_data"],"title":"GeneratedContent","description":"Generated content model."},"GradeRequest":{"properties":{"exercise":{"additionalProperties":true,"type":"object","title":"Exercise"},"answer":{"type":"string","title":"Answer"}},"type":"object","required":["exercise","answer"],"title":"GradeRequest"},"GradeStoreRequest":{"properties":{"user_id":{"type":"string","title":"User Id"},"can_do_id":{"type":"string","title":"Can Do Id"},"exercise":{"additionalProperties":true,"type":"object","title":"Exercise"},"answer":{"type":"string","title":"Answer"}},"type":"object","required":["user_id","can_do_id","exercise","answer"],"title":"GradeStoreRequest"},"GrammarOverviewResponse":{"properties":{"what_is":{"type":"string","title":"What Is"},"usage":{"type":"string","title":"Usage"},"cultural_context":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Cultural Context"},"examples":{"items":{"additionalProperties":{"type":"string"},"type":"object"},"type":"array","title":"Examples"},"tips":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Tips"},"related_patterns":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Related Patterns"},"model_used":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Model Used"},"generated_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Generated At"}},"type":"object","required":["what_is","usage","examples"],"title":"GrammarOverviewResponse"},"GrammarPatternResponse":{"properties":{"id":{"type":"string","title":"Id"},"sequence_number":{"type":"integer","title":"Sequence Number"},"pattern":{"type":"string","title":"Pattern"},"pattern_romaji":{"type":"string","title":"Pattern Romaji"},"textbook_form":{"type":"string","title":"Textbook Form"},"textbook_form_romaji":{"type":"string","title":"Textbook Form Romaji"},"example_sentence":{"type":"string","title":"Example Sentence"},"example_romaji":{"type":"string","title":"Example Romaji"},"classification":{"type":"string","title":"Classification"},"textbook":{"type":"string","title":"Textbook"},"topic":{"type":"string","title":"Topic"},"lesson":{"type":"string","title":"Lesson"},"jfs_category":{"type":"string","title":"Jfs Category"},"what_is":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"What Is"}},"type":"object","required":["id","sequence_number","pattern","pattern_romaji","textbook_form","textbook_form_romaji","example_sentence","example_romaji","classification","textbook","topic","lesson","jfs_category"],"title":"GrammarPatternResponse","description":"Response model for grammar patterns"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"HealthResponse":{"properties":{"status":{"type":"string","title":"Status"},"service":{"type":"string","title":"Service"},"version":{"type":"string","title":"Version"},"dependencies":{"additionalProperties":{"type":"string"},"type":"object","title":"Dependencies"}},"type":"object","required":["status","service","version","dependencies"],"title":"HealthResponse","description":"Health check response model."},"LearningPathResponse":{"properties":{"from_pattern":{"type":"string","title":"From Pattern"},"to_pattern":{"type":"string","title":"To Pattern"},"path_length":{"type":"integer","title":"Path Length"},"intermediate_patterns":{"items":{"type":"string"},"type":"array","title":"Intermediate Patterns"}},"type":"object","required":["from_pattern","to_pattern","path_length","intermediate_patterns"],"title":"LearningPathResponse","description":"Response model for learning paths"},"LearningPathStatsResponse":{"properties":{"total_patterns":{"type":"integer","title":"Total Patterns"},"completed_patterns":{"type":"integer","title":"Completed Patterns"},"average_mastery":{"type":"number","title":"Average Mastery"},"estimated_completion_days":{"type":"integer","title":"Estimated Completion Days"},"total_study_time_minutes":{"type":"integer","title":"Total Study Time Minutes"}},"type":"object","required":["total_patterns","completed_patterns","average_mastery","estimated_completion_days","total_study_time_minutes"],"title":"LearningPathStatsResponse","description":"Response model for learning path statistics"},"LessonAttemptIn":{"properties":{"word":{"type":"string","title":"Word"},"level":{"type":"integer","title":"Level"},"provider":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Provider"},"model":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Model"},"readability_score":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Readability Score"},"readability_level":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Readability Level"},"content_len":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Content Len"}},"type":"object","required":["word","level"],"title":"LessonAttemptIn"},"MasteryUpdateRequest":{"properties":{"user_id":{"type":"string","title":"User Id"},"can_do_id":{"type":"string","title":"Can Do Id"},"score":{"type":"number","title":"Score"}},"type":"object","required":["user_id","can_do_id","score"],"title":"MasteryUpdateRequest"},"PatternProgressRequest":{"properties":{"pattern_id":{"type":"string","title":"Pattern Id","description":"Grammar pattern ID"},"grade":{"type":"string","pattern":"^(again|hard|good|easy)$","title":"Grade","description":"SRS grade"},"study_time_seconds":{"anyOf":[{"type":"integer","minimum":0.0},{"type":"null"}],"title":"Study Time Seconds","description":"Time spent studying"},"confidence_self_reported":{"anyOf":[{"type":"integer","maximum":5.0,"minimum":1.0},{"type":"null"}],"title":"Confidence Self Reported","description":"Self-reported confidence"}},"type":"object","required":["pattern_id","grade"],"title":"PatternProgressRequest","description":"Request model for updating pattern progress"},"PatternProgressResponse":{"properties":{"pattern_id":{"type":"string","title":"Pattern Id"},"pattern_name":{"type":"string","title":"Pattern Name"},"mastery_level":{"type":"integer","title":"Mastery Level"},"last_studied":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Last Studied"},"next_review_date":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Next Review Date"},"is_completed":{"type":"boolean","title":"Is Completed"},"study_count":{"type":"integer","title":"Study Count"},"ease_factor":{"type":"number","title":"Ease Factor"},"interval_days":{"type":"integer","title":"Interval Days"}},"type":"object","required":["pattern_id","pattern_name","mastery_level","last_studied","next_review_date","is_completed","study_count","ease_factor","interval_days"],"title":"PatternProgressResponse","description":"Response model for pattern progress"},"PatternRecommendationResponse":{"properties":{"recommended_patterns":{"items":{"$ref":"#/components/schemas/GrammarPatternResponse"},"type":"array","title":"Recommended Patterns"},"reasoning":{"type":"string","title":"Reasoning"},"difficulty_match":{"type":"number","title":"Difficulty Match"}},"type":"object","required":["recommended_patterns","reasoning","difficulty_match"],"title":"PatternRecommendationResponse","description":"Response model for pattern recommendations"},"PersistLessonIn":{"properties":{"can_do_id":{"type":"string","title":"Can Do Id"},"version":{"type":"integer","title":"Version","default":1}},"type":"object","required":["can_do_id"],"title":"PersistLessonIn"},"PhaseState":{"properties":{"phase":{"type":"string","title":"Phase"},"completed_count":{"type":"integer","title":"Completed Count","default":0},"score":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Score"}},"type":"object","required":["phase"],"title":"PhaseState"},"SRSRequest":{"properties":{"item_id":{"type":"string","minLength":1,"title":"Item Id"},"last_interval_days":{"type":"integer","minimum":0.0,"title":"Last Interval Days","default":0},"grade":{"type":"string","enum":["again","hard","good","easy"],"title":"Grade"}},"type":"object","required":["item_id","grade"],"title":"SRSRequest"},"SRSResponse":{"properties":{"item_id":{"type":"string","title":"Item Id"},"next_interval_days":{"type":"integer","title":"Next Interval Days"},"next_review_at":{"type":"string","format":"date-time","title":"Next Review At"}},"type":"object","required":["item_id","next_interval_days","next_review_at"],"title":"SRSResponse"},"SearchFilters":{"properties":{"difficulty_levels":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Difficulty Levels"},"etymologies":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Etymologies"},"pos_tags":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Pos Tags"},"semantic_domains":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Semantic Domains"},"similarity_threshold":{"type":"number","title":"Similarity Threshold","default":0.7},"max_results":{"type":"integer","title":"Max Results","default":20}},"type":"object","title":"SearchFilters","description":"Search filters for refined results."},"SearchMode":{"type":"string","enum":["semantic","graph","hybrid","synonym","domain","difficulty"],"title":"SearchMode","description":"Search modes for different use cases."},"SearchRequest":{"properties":{"query":{"type":"string","title":"Query"},"mode":{"$ref":"#/components/schemas/SearchMode","default":"hybrid"},"difficulty_levels":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Difficulty Levels"},"etymologies":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Etymologies"},"pos_tags":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Pos Tags"},"semantic_domains":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Semantic Domains"},"similarity_threshold":{"type":"number","title":"Similarity Threshold","default":0.7},"max_results":{"type":"integer","title":"Max Results","default":20}},"type":"object","required":["query"],"title":"SearchRequest","description":"Search request model."},"SearchResult":{"properties":{"word_id":{"type":"string","title":"Word Id"},"kanji":{"type":"string","title":"Kanji"},"katakana":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Katakana"},"hiragana":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Hiragana"},"translation":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Translation"},"difficulty_level":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Difficulty Level"},"etymology":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Etymology"},"pos_primary":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Pos Primary"},"semantic_domains":{"items":{"type":"string"},"type":"array","title":"Semantic Domains","default":[]},"synonyms":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Synonyms","default":[]},"similarity_score":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Similarity Score"},"relevance_score":{"type":"number","title":"Relevance Score","default":0.0},"match_reasons":{"items":{"type":"string"},"type":"array","title":"Match Reasons","default":[]}},"type":"object","required":["word_id","kanji"],"title":"SearchResult","description":"Individual search result."},"SearchResults":{"properties":{"query":{"type":"string","title":"Query"},"search_mode":{"$ref":"#/components/schemas/SearchMode"},"results":{"items":{"$ref":"#/components/schemas/SearchResult"},"type":"array","title":"Results"},"total_found":{"type":"integer","title":"Total Found"},"search_time_ms":{"type":"integer","title":"Search Time Ms"},"filters_applied":{"$ref":"#/components/schemas/SearchFilters"}},"type":"object","required":["query","search_mode","results","total_found","search_time_ms","filters_applied"],"title":"SearchResults","description":"Search results container."},"SimilarPatternResponse":{"properties":{"pattern":{"type":"string","title":"Pattern"},"pattern_romaji":{"type":"string","title":"Pattern Romaji"},"example_sentence":{"type":"string","title":"Example Sentence"},"textbook":{"type":"string","title":"Textbook"},"similarity_reason":{"type":"string","title":"Similarity Reason"}},"type":"object","required":["pattern","pattern_romaji","example_sentence","textbook","similarity_reason"],"title":"SimilarPatternResponse","description":"Response model for similar patterns"},"SourceMetadata":{"properties":{"title":{"type":"string","title":"Title"},"author":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Author"},"url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Url"},"language":{"type":"string","maxLength":10,"title":"Language","default":"ja"}},"type":"object","required":["title"],"title":"SourceMetadata","description":"Minimal source metadata for attribution."},"Token":{"properties":{"access_token":{"type":"string","title":"Access Token"},"token_type":{"type":"string","title":"Token Type","default":"bearer"},"expires_in":{"type":"integer","title":"Expires In"},"user_id":{"type":"string","format":"uuid","title":"User Id"}},"type":"object","required":["access_token","expires_in","user_id"],"title":"Token","description":"JWT token response."},"UrlSubmission":{"properties":{"url":{"type":"string","maxLength":2083,"minLength":1,"format":"uri","title":"Url"},"source":{"$ref":"#/components/schemas/SourceMetadata"}},"type":"object","required":["url","source"],"title":"UrlSubmission"},"UserCreate":{"properties":{"email":{"type":"string","format":"email","title":"Email"},"username":{"type":"string","maxLength":50,"minLength":3,"title":"Username"},"full_name":{"anyOf":[{"type":"string","maxLength":255},{"type":"null"}],"title":"Full Name"},"native_language":{"type":"string","maxLength":10,"title":"Native Language","default":"en"},"target_languages":{"items":{"type":"string"},"type":"array","title":"Target Languages","default":["ja"]},"current_level":{"type":"string","title":"Current Level","default":"beginner"},"learning_goals":{"items":{"type":"string"},"type":"array","title":"Learning Goals","default":[]},"study_time_preference":{"type":"integer","maximum":180.0,"minimum":5.0,"title":"Study Time Preference","default":30},"difficulty_preference":{"type":"string","title":"Difficulty Preference","default":"adaptive"},"preferred_ai_provider":{"type":"string","title":"Preferred Ai Provider","default":"openai"},"conversation_style":{"type":"string","title":"Conversation Style","default":"balanced"},"max_conversation_length":{"type":"integer","maximum":200.0,"minimum":10.0,"title":"Max Conversation Length","default":50},"auto_save_conversations":{"type":"boolean","title":"Auto Save Conversations","default":true},"password":{"type":"string","maxLength":100,"minLength":8,"title":"Password"}},"type":"object","required":["email","username","password"],"title":"UserCreate","description":"Schema for user creation."},"UserLogin":{"properties":{"username":{"type":"string","title":"Username"},"password":{"type":"string","title":"Password"}},"type":"object","required":["username","password"],"title":"UserLogin","description":"User login credentials."},"UserProfile":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"email":{"type":"string","title":"Email"},"username":{"type":"string","title":"Username"},"full_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Full Name"},"native_language":{"type":"string","title":"Native Language"},"target_languages":{"items":{"type":"string"},"type":"array","title":"Target Languages"},"current_level":{"type":"string","title":"Current Level"},"learning_goals":{"items":{"type":"string"},"type":"array","title":"Learning Goals"},"study_time_preference":{"type":"integer","title":"Study Time Preference"},"difficulty_preference":{"type":"string","title":"Difficulty Preference"},"preferred_ai_provider":{"type":"string","title":"Preferred Ai Provider"},"conversation_style":{"type":"string","title":"Conversation Style"},"is_active":{"type":"boolean","title":"Is Active"},"is_verified":{"type":"boolean","title":"Is Verified"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"},"total_study_time_minutes":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Total Study Time Minutes","default":0},"total_conversations":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Total Conversations","default":0},"total_words_learned":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Total Words Learned","default":0},"current_streak_days":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Current Streak Days","default":0},"assessed_level":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Assessed Level"}},"type":"object","required":["id","email","username","full_name","native_language","target_languages","current_level","learning_goals","study_time_preference","difficulty_preference","preferred_ai_provider","conversation_style","is_active","is_verified","created_at","updated_at"],"title":"UserProfile","description":"Extended user profile with learning statistics."},"UserProgressSummaryResponse":{"properties":{"total_patterns_studied":{"type":"integer","title":"Total Patterns Studied"},"total_patterns_mastered":{"type":"integer","title":"Total Patterns Mastered"},"current_streak_days":{"type":"integer","title":"Current Streak Days"},"weekly_study_minutes":{"type":"integer","title":"Weekly Study Minutes"},"average_mastery_level":{"type":"number","title":"Average Mastery Level"},"patterns_due_today":{"type":"integer","title":"Patterns Due Today"},"patterns_overdue":{"type":"integer","title":"Patterns Overdue"}},"type":"object","required":["total_patterns_studied","total_patterns_mastered","current_streak_days","weekly_study_minutes","average_mastery_level","patterns_due_today","patterns_overdue"],"title":"UserProgressSummaryResponse","description":"Response model for user progress summary"},"UserResponse":{"properties":{"email":{"type":"string","format":"email","title":"Email"},"username":{"type":"string","maxLength":50,"minLength":3,"title":"Username"},"full_name":{"anyOf":[{"type":"string","maxLength":255},{"type":"null"}],"title":"Full Name"},"native_language":{"type":"string","maxLength":10,"title":"Native Language","default":"en"},"target_languages":{"items":{"type":"string"},"type":"array","title":"Target Languages","default":["ja"]},"current_level":{"type":"string","title":"Current Level","default":"beginner"},"learning_goals":{"items":{"type":"string"},"type":"array","title":"Learning Goals","default":[]},"study_time_preference":{"type":"integer","maximum":180.0,"minimum":5.0,"title":"Study Time Preference","default":30},"difficulty_preference":{"type":"string","title":"Difficulty Preference","default":"adaptive"},"preferred_ai_provider":{"type":"string","title":"Preferred Ai Provider","default":"openai"},"conversation_style":{"type":"string","title":"Conversation Style","default":"balanced"},"max_conversation_length":{"type":"integer","maximum":200.0,"minimum":10.0,"title":"Max Conversation Length","default":50},"auto_save_conversations":{"type":"boolean","title":"Auto Save Conversations","default":true},"id":{"type":"string","format":"uuid","title":"Id"},"is_active":{"type":"boolean","title":"Is Active"},"is_verified":{"type":"boolean","title":"Is Verified"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"}},"type":"object","required":["email","username","id","is_active","is_verified","created_at","updated_at"],"title":"UserResponse","description":"Schema for user responses."},"UserUpdate":{"properties":{"full_name":{"anyOf":[{"type":"string","maxLength":255},{"type":"null"}],"title":"Full Name"},"native_language":{"anyOf":[{"type":"string","maxLength":10},{"type":"null"}],"title":"Native Language"},"target_languages":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Target Languages"},"current_level":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Current Level"},"learning_goals":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Learning Goals"},"study_time_preference":{"anyOf":[{"type":"integer","maximum":180.0,"minimum":5.0},{"type":"null"}],"title":"Study Time Preference"},"difficulty_preference":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Difficulty Preference"},"preferred_ai_provider":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Preferred Ai Provider"},"conversation_style":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Conversation Style"},"max_conversation_length":{"anyOf":[{"type":"integer","maximum":200.0,"minimum":10.0},{"type":"null"}],"title":"Max Conversation Length"},"auto_save_conversations":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Auto Save Conversations"}},"type":"object","title":"UserUpdate","description":"Schema for user updates."},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"},"WordContentRequest":{"properties":{"word_kanji":{"type":"string","title":"Word Kanji"},"force_regenerate":{"type":"boolean","title":"Force Regenerate","default":false}},"type":"object","required":["word_kanji"],"title":"WordContentRequest","description":"Request model for generating word content"},"WordContentResponse":{"properties":{"word_kanji":{"type":"string","title":"Word Kanji"},"definitions":{"items":{"type":"string"},"type":"array","title":"Definitions"},"examples":{"items":{"type":"string"},"type":"array","title":"Examples"},"cultural_notes":{"type":"string","title":"Cultural Notes"},"kanji_breakdown":{"type":"string","title":"Kanji Breakdown"},"grammar_patterns":{"items":{"type":"string"},"type":"array","title":"Grammar Patterns"},"collocations":{"items":{"type":"string"},"type":"array","title":"Collocations"},"learning_tips":{"type":"string","title":"Learning Tips"},"confidence_score":{"type":"number","title":"Confidence Score"},"model_used":{"type":"string","title":"Model Used"},"generated_at":{"type":"string","title":"Generated At"},"has_existing_content":{"type":"boolean","title":"Has Existing Content"}},"type":"object","required":["word_kanji","definitions","examples","cultural_notes","kanji_breakdown","grammar_patterns","collocations","learning_tips","confidence_score","model_used","generated_at","has_existing_content"],"title":"WordContentResponse","description":"Response model for word content"}},"securitySchemes":{"OAuth2PasswordBearer":{"type":"oauth2","flows":{"password":{"scopes":{},"tokenUrl":"api/v1/auth/token"}}}}}}
